I"úW<ul id="markdown-toc">
  <li><a href="#1uiviewçš„å˜åŒ–" id="markdown-toc-1uiviewçš„å˜åŒ–">1.UIViewçš„å˜åŒ–</a>    <ul>
      <li><a href="#nsdirectionaledgeinsets" id="markdown-toc-nsdirectionaledgeinsets">NSDirectionalEdgeInsets</a></li>
      <li><a href="#safearea" id="markdown-toc-safearea">SafeArea</a></li>
      <li><a href="#ä»‹ç»" id="markdown-toc-ä»‹ç»">ä»‹ç»</a>        <ul>
          <li><a href="#ä½¿ç”¨" id="markdown-toc-ä½¿ç”¨">ä½¿ç”¨</a></li>
        </ul>
      </li>
    </ul>
  </li>
  <li><a href="#2uiviewcontroller" id="markdown-toc-2uiviewcontroller">2.UIViewController</a>    <ul>
      <li><a href="#è¿‡æ—¶çš„api" id="markdown-toc-è¿‡æ—¶çš„api">è¿‡æ—¶çš„API</a>        <ul>
          <li><a href="#automaticallyadjustsscrollviewinsets" id="markdown-toc-automaticallyadjustsscrollviewinsets"><code class="language-plaintext highlighter-rouge">automaticallyAdjustsScrollViewInsets</code></a></li>
          <li><a href="#toplayoutguideå’Œbottomlayoutguideå±æ€§" id="markdown-toc-toplayoutguideå’Œbottomlayoutguideå±æ€§"><code class="language-plaintext highlighter-rouge">topLayoutGuide</code>å’Œ<code class="language-plaintext highlighter-rouge">bottomLayoutGuide</code>å±æ€§</a></li>
        </ul>
      </li>
      <li><a href="#additionalsafeareainsetså±æ€§" id="markdown-toc-additionalsafeareainsetså±æ€§"><code class="language-plaintext highlighter-rouge">additionalSafeAreaInsets</code>å±æ€§</a></li>
      <li><a href="#systemminimumlayoutmarginså’Œviewrespectssystemminimumlayoutmarginså±æ€§" id="markdown-toc-systemminimumlayoutmarginså’Œviewrespectssystemminimumlayoutmarginså±æ€§"><code class="language-plaintext highlighter-rouge">systemMinimumLayoutMargins</code>å’Œ<code class="language-plaintext highlighter-rouge">viewRespectsSystemMinimumLayoutMargins</code>å±æ€§</a></li>
      <li><a href="#viewlayoutmarginsdidchangeæ–¹æ³•" id="markdown-toc-viewlayoutmarginsdidchangeæ–¹æ³•"><code class="language-plaintext highlighter-rouge">viewLayoutMarginsDidChange</code>æ–¹æ³•</a></li>
      <li><a href="#viewsafeareainsetsdidchangeæ–¹æ³•" id="markdown-toc-viewsafeareainsetsdidchangeæ–¹æ³•"><code class="language-plaintext highlighter-rouge">viewSafeAreaInsetsDidChange</code>æ–¹æ³•</a></li>
    </ul>
  </li>
  <li><a href="#3uinavigationbar" id="markdown-toc-3uinavigationbar">3.UINavigationBar</a></li>
  <li><a href="#4uinavigationitem" id="markdown-toc-4uinavigationitem">4.UINavigationItem</a>    <ul>
      <li><a href="#æ§åˆ¶å¤§æ ‡é¢˜çš„æ˜¾ç¤º" id="markdown-toc-æ§åˆ¶å¤§æ ‡é¢˜çš„æ˜¾ç¤º">æ§åˆ¶å¤§æ ‡é¢˜çš„æ˜¾ç¤º</a></li>
      <li><a href="#uisearchcontroller" id="markdown-toc-uisearchcontroller">UISearchController</a></li>
    </ul>
  </li>
  <li><a href="#5-uiscrollviewå˜åŒ–" id="markdown-toc-5-uiscrollviewå˜åŒ–">5. UIScrollViewå˜åŒ–</a></li>
  <li><a href="#6-uiä¸»çº¿ç¨‹æ“ä½œæ—¥å¿—æé†’" id="markdown-toc-6-uiä¸»çº¿ç¨‹æ“ä½œæ—¥å¿—æé†’">6. UIä¸»çº¿ç¨‹æ“ä½œæ—¥å¿—æé†’</a></li>
</ul>
<hr />

<h2 id="1uiviewçš„å˜åŒ–">1.UIViewçš„å˜åŒ–</h2>

<h3 id="nsdirectionaledgeinsets">NSDirectionalEdgeInsets</h3>

<p>åœ¨iOS 11ä¸­ï¼Œæ–°å¢<code class="language-plaintext highlighter-rouge">directionalLayoutMargins</code>å±æ€§æ¥æŒ‡å®šè¾¹è·ã€‚</p>

<pre><code class="language-objective-c">typedef struct UIEdgeInsets {
    CGFloat top, left, bottom, right;  // specify amount to inset (positive) for each of the edges. values can be negative to 'outset'
} UIEdgeInsets;

/* Specifically for use in methods and functions supporting user interface layout direction
 */
typedef struct NSDirectionalEdgeInsets {
    CGFloat top, leading, bottom, trailing;  // specify amount to inset (positive) for each of the edges. values can be negative to 'outset'
} NSDirectionalEdgeInsets API_AVAILABLE(ios(11.0),tvos(11.0),watchos(4.0));
</code></pre>

<p>åœ¨ä»¥å‰åšæ³•åˆ™éœ€è¦åˆ¤æ–­è¯­è¨€æ¥åŒºåˆ†å“ªäº›æ˜¯RTLè¯­è¨€ï¼Œç„¶åå†åšè®¾ç½®ï¼š</p>

<pre><code class="language-objective-c">if ([UIView userInterfaceLayoutDirectionForSemanticContentAttribute:self.view.semanticContentAttribute] == UIUserInterfaceLayoutDirectionRightToLeft) {
    self.view.layoutMargins.left = 10;
} else {
    self.view.layoutMargins.right = 10;
}
</code></pre>

<p>ç°åœ¨å®ç°åŒæ ·çš„æ•ˆæœåªéœ€ï¼š</p>

<pre><code class="language-objective-c">self.view.directionalLayoutMargins = NSDirectionalEdgeInsetsMake(0, 0, 0, 10);
</code></pre>

<h3 id="safearea">SafeArea</h3>

<h3 id="ä»‹ç»">ä»‹ç»</h3>

<pre><code class="language-objective-c">@property (nonatomic) BOOL insetsLayoutMarginsFromSafeArea API_AVAILABLE(ios(11.0),tvos(11.0));  // Default: YES
@property (nonatomic,readonly) UIEdgeInsets safeAreaInsets API_AVAILABLE(ios(11.0),tvos(11.0));
- (void)safeAreaInsetsDidChange API_AVAILABLE(ios(11.0),tvos(11.0));
/* The top of the safeAreaLayoutGuide indicates the unobscured top edge of the view (e.g, not behind
 the status bar or navigation bar, if present). Similarly for the other edges.
 */
@property(nonatomic,readonly,strong) UILayoutGuide *safeAreaLayoutGuide API_AVAILABLE(ios(11.0),tvos(11.0));

</code></pre>

<p>çœ‹ä¸€ä¸‹å®‰å…¨åŒºåŸŸçš„å˜åŒ–</p>

<pre><code class="language-objective-c">- (void)viewDidLoad {
    [super viewDidLoad];
    
    NSString *safeAreaInsetsStr = NSStringFromUIEdgeInsets(self.view.safeAreaInsets);
    NSString *layoutFrameStr = NSStringFromCGRect(self.view.safeAreaLayoutGuide.layoutFrame);
    NSLog(@"viewDidLoad safeAreaInsets = %@, layoutFrame = %@", safeAreaInsetsStr, layoutFrameStr);
}

- (void)viewDidAppear:(BOOL)animated {
    [super viewDidAppear:animated];
  
	NSString *safeAreaInsetsStr = NSStringFromUIEdgeInsets(self.view.safeAreaInsets);
    NSString *layoutFrameStr = NSStringFromCGRect(self.view.safeAreaLayoutGuide.layoutFrame);
    NSLog(@"viewDidLoad safeAreaInsets = %@, layoutFrame = %@", safeAreaInsetsStr, layoutFrameStr);
}
</code></pre>

<p>å¯ä»¥çœ‹åˆ°</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>2017-10-31 14:36:07.675737+0800 test[8453:648004] viewDidLoad safeAreaInsets = {0, 0, 0, 0}, layoutFrame = { {0, 0}, {375, 812} }
2017-10-31 14:36:07.702525+0800 test[8453:648004] viewDidLoad safeAreaInsets = {44, 0, 34, 0}, layoutFrame = { {0, 44}, {375, 734} }
</code></pre></div></div>

<p>å¦‚æœå®‰å…¨åŒºåŸŸæ”¹å˜äº†ä¼šæ‰ç”¨è¿™ä¸ªæ–¹æ³•ã€‚</p>

<pre><code class="language-objective-c">- (void)safeAreaInsetsDidChange {
    //å†™å…¥å˜æ›´å®‰å…¨åŒºåŸŸåçš„ä»£ç ...
}
</code></pre>

<p>å¦‚æœä½ ä¸æƒ³è®©<code class="language-plaintext highlighter-rouge">safeAreaInsets</code>å½±å“ä½ çš„è§†å›¾å¸ƒå±€ï¼Œåˆ™å¯ä»¥å°†<code class="language-plaintext highlighter-rouge">insetsLayoutMarginsFromSafeArea</code>è®¾ç½®ä¸ºNOï¼Œæ‰€æœ‰çš„è§†å›¾å¸ƒå±€å°†ä¼šå¿½ç•¥<code class="language-plaintext highlighter-rouge">safeAreaInsets</code>è¿™ä¸ªå±æ€§äº†ã€‚è¦æ³¨æ„çš„æ˜¯ï¼Œ<code class="language-plaintext highlighter-rouge">insetsLayoutMarginsFromSafeArea</code>ä»…ç”¨äºAutoLayoutï¼Œå³ä½¿è¯¥å±æ€§ä¸ºNOï¼Œè§†å›¾çš„<code class="language-plaintext highlighter-rouge">safeAreaInsets</code>è¿˜æ˜¯ä¸€æ ·æœ‰å€¼ï¼Œè€Œä¸”å®‰å…¨åŒºåŸŸå˜æ›´æ–¹æ³•<code class="language-plaintext highlighter-rouge">safeAreaInsetsDidChange</code>ä¸€æ ·è¢«è°ƒç”¨ã€‚</p>

<h4 id="ä½¿ç”¨">ä½¿ç”¨</h4>

<pre><code class="language-objective-c">// ä¸€äº›å®å®šä¹‰
// iPhone X
#define  CYPHOTOLIB_IPHONEX (CYPHOTOLIB_SCREEN_W == 375.f &amp;&amp; CYPHOTOLIB_SCREEN_H == 812.f ? YES : NO)

// Status bar height.
#define  CYPHOTOLIB_STATUS_H  (CYPHOTOLIB_IPHONEX ? 44.f : 20.f)
#define  CYPHOTOLIB_TABBAR_H  (CYPHOTOLIB_IPHONEX ? (49.f+34.f) : 49.f)
#define  CYPHOTOLIB_NAVBAR_H  (CYPHOTOLIB_IPHONEX ? 88.f : 64.f)
#define  CYPHOTOLIB_NAVBAR_H_NoStatus  44.f

#define  CYPHOTOLIB_TabbarSafeBottomMargin  (CYPHOTOLIB_IPHONEX ? 34.f : 0.f)
#define  CYPHOTOLIB_ViewSafeAreInsets(view) ({UIEdgeInsets insets; if(@available(iOS 11.0, *)) {insets = view.safeAreaInsets;} else {insets = UIEdgeInsetsZero;} insets;})
</code></pre>

<p>æˆ‘ä»¬å¯ä»¥è¿™ä¹ˆä½¿ç”¨</p>

<pre><code class="language-objective-c">// è·å–safeArea
UIEdgeInsets insets = CYPHOTOLIB_ViewSafeAreInsets(self.view);
// æ ¹æ®top left bottom right çš„å€¼æ¥é€‚é…  æ¯”å¦‚æ¨ªå±æ—¶iPhoneXçš„åˆ˜æµ·ä¼šæŒ¡ä½ä¸€éƒ¨åˆ†è§†é¢‘
// ...
</code></pre>
<h2 id="2uiviewcontroller">2.UIViewController</h2>

<h3 id="è¿‡æ—¶çš„api">è¿‡æ—¶çš„API</h3>

<h4 id="automaticallyadjustsscrollviewinsets"><code class="language-plaintext highlighter-rouge">automaticallyAdjustsScrollViewInsets</code></h4>

<p>iOS 7ä¸­ä½¿ç”¨è¯¥æ–¹æ³•æ¥è‡ªåŠ¨è°ƒæ•´<code class="language-plaintext highlighter-rouge">UIScrollView</code>çš„<code class="language-plaintext highlighter-rouge">contentInset</code>ã€‚åœ¨iOS 11ä¹‹åå°†ä¼šä½¿ç”¨<code class="language-plaintext highlighter-rouge">UIScrollView</code>çš„<code class="language-plaintext highlighter-rouge">contentInsetAdjustmentBehavior</code>å±æ€§æ¥ä»£æ›¿è¯¥æ–¹æ³•ã€‚</p>

<h4 id="toplayoutguideå’Œbottomlayoutguideå±æ€§"><code class="language-plaintext highlighter-rouge">topLayoutGuide</code>å’Œ<code class="language-plaintext highlighter-rouge">bottomLayoutGuide</code>å±æ€§</h4>

<p>åœ¨iOS 11ä¹‹åå°†ä½¿ç”¨å®‰å…¨åŒºåŸŸ(Safe Area)æ¥ä»£æ›¿è¯¥éƒ¨åˆ†åŠŸèƒ½çš„å®ç°ã€‚</p>

<h3 id="additionalsafeareainsetså±æ€§"><code class="language-plaintext highlighter-rouge">additionalSafeAreaInsets</code>å±æ€§</h3>

<p>iOS 11åŠ å…¥å®‰å…¨åŒºåŸŸåï¼Œå¯¹äºVCåˆ™å¯ä»¥é€šè¿‡è¯¥å±æ€§æ¥å¯¹è¯¥åŒºåŸŸé™„åŠ ä¸€ä¸ªè¾¹è·ä¿¡æ¯ã€‚å¦‚ï¼š</p>

<pre><code class="language-objective-c">self.additionalSafeAreaInsets = UIEdgeInsetsMake(30, 0, 0, 30);
</code></pre>

<p>æ³¨æ„ï¼šè¿™é‡Œæ˜¯é™„åŠ è¾¹è·ï¼Œæ„æ€å°±æ˜¯åœ¨åŸæœ‰çš„<code class="language-plaintext highlighter-rouge">safeAreaInsets</code>å€¼ä¸­å¢åŠ å¯¹åº”çš„è¾¹è·å€¼ã€‚å¦‚æœåŸæ¥çš„æ˜¯{10, 0, 0, 10}, åˆ™æœ€åå¾—å‡ºçš„è¾¹è·æ˜¯{40, 0, 0, 40}ã€‚</p>

<h3 id="systemminimumlayoutmarginså’Œviewrespectssystemminimumlayoutmarginså±æ€§"><code class="language-plaintext highlighter-rouge">systemMinimumLayoutMargins</code>å’Œ<code class="language-plaintext highlighter-rouge">viewRespectsSystemMinimumLayoutMargins</code>å±æ€§</h3>

<p>è¯¥å±æ€§è¡¨ç¤ºäº†ä¸€ä¸ªç³»ç»Ÿæœ€å°çš„è¾¹è·ä¿¡æ¯ï¼Œæ‰€æœ‰çš„è§†å›¾æ’ç‰ˆéƒ½åº”è¯¥éµå¾ªè¿™ä¸ªè¾¹è·ä¿¡æ¯çš„ã€‚é™¤éå°†<code class="language-plaintext highlighter-rouge">viewRespectsSystemMinimumLayoutMargins</code>è®¾ç½®ä¸ºNOã€‚</p>

<h3 id="viewlayoutmarginsdidchangeæ–¹æ³•"><code class="language-plaintext highlighter-rouge">viewLayoutMarginsDidChange</code>æ–¹æ³•</h3>

<p>æ ¹è§†å›¾çš„è¾¹è·å˜æ›´æ—¶ä¼šè§¦å‘è¯¥æ–¹æ³•çš„å›è°ƒã€‚å¯ä»¥é€šè¿‡è¯¥æ–¹æ³•æ¥å¤„ç†å½“è¾¹è·æ”¹å˜æ—¶å­è§†å›¾çš„å¸ƒå±€ã€‚</p>

<h3 id="viewsafeareainsetsdidchangeæ–¹æ³•"><code class="language-plaintext highlighter-rouge">viewSafeAreaInsetsDidChange</code>æ–¹æ³•</h3>

<p>å½“è§†å›¾çš„å®‰å…¨åŒºåŸŸå‘ç”Ÿå˜æ›´æ—¶ä¼šè§¦å‘è¯¥æ–¹æ³•çš„å›è°ƒã€‚å¯ä»¥é€šè¿‡è¯¥æ–¹æ³•æ¥å¤„ç†å®‰å…¨åŒºåŸŸå˜æ›´æ—¶çš„å­è§†å›¾å¸ƒå±€ã€‚</p>

<h2 id="3uinavigationbar">3.UINavigationBar</h2>

<p>iOS 11ä¸­åŠ å…¥äº†å¤§æ ‡é¢˜æ¨¡å¼ï¼Œå®ç°è¯¥æ•ˆæœéœ€è¦å°†å¯¼èˆªæ çš„<code class="language-plaintext highlighter-rouge">prefersLargeTitles</code>è®¾ç½®ä¸ºYES</p>

<pre><code class="language-objective-c">self.navigationController.navigationBar.prefersLargeTitles = YES;
</code></pre>

<h2 id="4uinavigationitem">4.UINavigationItem</h2>

<h3 id="æ§åˆ¶å¤§æ ‡é¢˜çš„æ˜¾ç¤º">æ§åˆ¶å¤§æ ‡é¢˜çš„æ˜¾ç¤º</h3>

<p>å¦‚æœä½ æƒ³æ§åˆ¶æ¯ä¸ªè§†å›¾çš„å¤§æ ‡é¢˜æ˜¯å¦æ˜¾ç¤ºï¼Œè¿™éœ€è¦ä½¿ç”¨<code class="language-plaintext highlighter-rouge">UINavigationItem</code>çš„<code class="language-plaintext highlighter-rouge">largeTitleDisplayMode</code>å±æ€§æ¥æ§åˆ¶å¤§æ ‡é¢˜çš„æ˜¾ç¤ºã€‚è¯¥å±æ€§ä¸ºæšä¸¾ç±»å‹ï¼Œå®šä¹‰å¦‚ä¸‹ï¼š</p>

<pre><code class="language-objective-c">typedef NS_ENUM(NSInteger, UINavigationItemLargeTitleDisplayMode)
 {  
    /// è‡ªåŠ¨æ¨¡å¼ï¼Œä¼šç»§æ‰¿å‰ä¸€ä¸ªNavigationItemæ‰€è®¾ç½®çš„æ¨¡å¼
    UINavigationItemLargeTitleDisplayModeAutomatic,
    /// å½“å‰ Navigationitem æ€»æ˜¯å¯ç”¨å¤§æ ‡é¢˜æ¨¡å¼
    UINavigationItemLargeTitleDisplayModeAlways,
    /// å½“å‰ Navigationitem æ€»æ˜¯ç¦ç”¨å¤§æ ‡é¢˜æ¨¡å¼
    UINavigationItemLargeTitleDisplayModeNever,
}
</code></pre>

<p>æ ¹æ®ä¸Šé¢çš„æè¿°ï¼Œå¯ä»¥åœ¨VCåˆå§‹åŒ–<code class="language-plaintext highlighter-rouge">init</code>æˆ–è€…<code class="language-plaintext highlighter-rouge">awakeFromNib</code>æ–¹æ³•ä¸­è®¾ç½®æ˜¾ç¤ºå›¾æ ‡æ¨¡å¼ï¼š</p>

<pre><code class="language-objective-c">self.navigationItem.largeTitleDisplayMode = UINavigationItemLargeTitleDisplayModeAlways;
</code></pre>

<h3 id="uisearchcontroller">UISearchController</h3>

<p>iOS 11 ä¸­æ–°å¢äº†ä¸¤ä¸ªå±æ€§<code class="language-plaintext highlighter-rouge">searchController</code>å’Œ<code class="language-plaintext highlighter-rouge">hidesSearchBarWhenScrolling</code>ã€‚è¿™ä¸¤ä¸ªå±æ€§ä¸»è¦ç”¨äºç®€åŒ–VCå¯¹<code class="language-plaintext highlighter-rouge">UISearchController</code>çš„é›†æˆä»¥åŠè§†è§‰ä¼˜åŒ–ã€‚å…¶ä¸­<code class="language-plaintext highlighter-rouge">searchController</code>å±æ€§ç”¨äºæŒ‡å®šå½“å‰VCçš„ä¸€ä¸ªæœç´¢æ§åˆ¶å™¨ã€‚è€Œ<code class="language-plaintext highlighter-rouge">hidesSearchBarWhenScrolling</code>å±æ€§åˆ™ç”¨äºæ§åˆ¶å½“è§†å›¾æ»šåŠ¨æ—¶æ˜¯å¦éšè—æœç´¢æ çš„UIï¼Œå½“è¯¥å€¼ä¸ºYESæ—¶ï¼Œæœç´¢æ åªæœ‰åœ¨å†…å®¹è§†å›¾ï¼ˆ<code class="language-plaintext highlighter-rouge">UIScrollView</code>åŠå…¶å­ç±»ï¼‰é¡¶éƒ¨æ˜¯æ‰ä¼šæ˜¾ç¤ºï¼Œåœ¨æ»šåŠ¨è¿‡ç¨‹ä¸­ä¼šéšè—èµ·æ¥ï¼›å½“è¯¥å€¼ä¸ºNOæ—¶ï¼Œåˆ™ä¸å—æ»šåŠ¨å½±å“ä¸€ç›´æ˜¾ç¤ºåœ¨å¯¼èˆªæ ä¸­ã€‚å…·ä½“çš„ä»£ç å®ç°å¦‚ä¸‹ï¼š</p>

<pre><code class="language-objective-c">- (void)awakeFromNib {
    [super awakeFromNib];
    
    //è®¾ç½®SearchControlleråˆ°navigationItem
    self.searchController = [[UISearchController alloc] initWithSearchResultsController:self];
    self.navigationItem.searchController = self.searchController;
    self.navigationItem.hidesSearchBarWhenScrolling = YES;
}
</code></pre>

<h2 id="5-uiscrollviewå˜åŒ–">5. UIScrollViewå˜åŒ–</h2>

<p>ä¹‹å‰çš„ç³»ç»Ÿä¸­ï¼Œå¦‚æœä½ çš„æ»šåŠ¨è§†å›¾åŒ…å«åœ¨ä¸€ä¸ªå¯¼èˆªæ§åˆ¶å™¨ä¸‹ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨åœ°è°ƒæ•´ä½ çš„æ»šåŠ¨è§†å›¾çš„<code class="language-plaintext highlighter-rouge">contentInset</code>ã€‚è€ŒiOS 11æ–°å¢<code class="language-plaintext highlighter-rouge">adjustedContentInset</code>å±æ€§å–æ›¿ä¹‹å‰<code class="language-plaintext highlighter-rouge">contentInset</code>çš„å¤„ç†æ–¹å¼ã€‚</p>

<p><strong>æ³¨ï¼šä¸€å®šè¦æ˜¯VCçš„æ ¹è§†å›¾ä¸ºUIScrollViewæˆ–è€…å…¶å­ç±»æ‰èƒ½å¤Ÿå¾—åˆ°adjustedContentInsetçš„å€¼ï¼Œå¦åˆ™è·å–åˆ°çš„æ˜¯ç©ºå€¼ã€‚</strong></p>

<p>é€šè¿‡ä½¿ç”¨<code class="language-plaintext highlighter-rouge">contentInsetAdjustmentBehavior</code>å±æ€§å¯ä»¥æ§åˆ¶Â <code class="language-plaintext highlighter-rouge">adjustedContentInset</code>çš„å˜åŒ–ã€‚è¯¥å±æ€§ä¸ºæšä¸¾ç±»å‹ï¼Œå…¶å®šä¹‰å¦‚ä¸‹ï¼š</p>

<pre><code class="language-objective-c">typedef NS_ENUM(NSInteger, UIScrollViewContentInsetAdjustmentBehavior) {
    UIScrollViewContentInsetAdjustmentAutomatic,
    UIScrollViewContentInsetAdjustmentScrollableAxes, 
    UIScrollViewContentInsetAdjustmentNever,
    UIScrollViewContentInsetAdjustmentAlways, 
}
</code></pre>

<p>å…¶ä¸­<code class="language-plaintext highlighter-rouge">UIScrollViewContentInsetAdjustmentAutomatic</code>ä¸<code class="language-plaintext highlighter-rouge">UIScrollViewContentInsetAdjustmentScrollableAxes</code>ä¸€æ ·,ScrollViewä¼šè‡ªåŠ¨è®¡ç®—å’Œé€‚åº”é¡¶éƒ¨å’Œåº•éƒ¨çš„å†…è¾¹è·å¹¶ä¸”åœ¨scrollView ä¸å¯æ»šåŠ¨æ—¶,ä¹Ÿä¼šè®¾ç½®å†…è¾¹è·ï¼›<code class="language-plaintext highlighter-rouge">UIScrollViewContentInsetAdjustmentNever</code>è¡¨ç¤ºä¸è®¡ç®—å†…è¾¹è·ï¼›<code class="language-plaintext highlighter-rouge">UIScrollViewContentInsetAdjustmentAlways</code>åˆ™æ ¹æ®è§†å›¾çš„å®‰å…¨åŒºåŸŸæ¥è®¡ç®—å†…è¾¹è·ã€‚</p>

<p>å¦‚æœéœ€è¦æ„ŸçŸ¥<code class="language-plaintext highlighter-rouge">adjustedContentInset</code>çš„å˜åŒ–ï¼Œç„¶åæ ¹æ®å˜åŒ–è¿›è¡Œä¸åŒæ“ä½œåˆ™å¯ä»¥é€šè¿‡é‡å†™æ–°å¢çš„<code class="language-plaintext highlighter-rouge">adjustedContentInsetDidChange</code>æ–¹æ³•æˆ–è€…å®ç°<code class="language-plaintext highlighter-rouge">UIScrollViewDelegate</code>ä¸­çš„<code class="language-plaintext highlighter-rouge">scrollViewDidChangeAdjustedContentInset</code>æ–¹æ³•æ¥å®ç°ã€‚å¦‚ï¼š</p>

<pre><code class="language-objective-c">//é‡å†™æ–¹æ³•
- (void)adjustedContentInsetDidChange {
    [super adjustedContentInsetDidChange];

    //æ‰§è¡Œæ“ä½œ...
}

//å®ç°å§”æ‰˜
- (void)scrollViewDidChangeAdjustedContentInset:(UIScrollView *)scrollView {
    //æ‰§è¡Œæ“ä½œ...
}
</code></pre>

<p>é™¤äº†æ–°å¢ä¸Šè¿°æ‰€è¯´çš„è¾¹è·ç›¸å…³å±æ€§å¤–ï¼Œè¿˜æ–°å¢äº†<code class="language-plaintext highlighter-rouge">contentLayoutGuide</code>å’Œ<code class="language-plaintext highlighter-rouge">frameLayoutGuide</code>å±æ€§ï¼Œç”¨äºæè¿°å†…å®¹å¸ƒå±€å’Œæ•´ä½“å¸ƒå±€ä¿¡æ¯ã€‚</p>

<h2 id="6-uiä¸»çº¿ç¨‹æ“ä½œæ—¥å¿—æé†’">6. UIä¸»çº¿ç¨‹æ“ä½œæ—¥å¿—æé†’</h2>

<p>ä¹‹å‰çš„ç³»ç»Ÿä¸­å¦‚æœä½ ä¸å°å¿ƒå°†UIæ”¾å…¥éä¸»çº¿ç¨‹æ“ä½œæ—¶ï¼ŒDebugæ—¥å¿—æ˜¯æ²¡æœ‰ä»»ä½•ä¿¡æ¯åé¦ˆçš„ï¼Œå¯¼è‡´æœ‰æ—¶å€™åœ¨æ’é”™æ—¶éå¸¸å›°éš¾ã€‚åœ¨æ–°çš„Xcode 9ä¸­ï¼Œå¦‚æœä½ å¤„äºè°ƒè¯•çŠ¶æ€ï¼Œå°†UIæ”¾å…¥éä¸»çº¿ç¨‹æ“ä½œï¼Œå¦‚ï¼š</p>

<pre><code class="language-objective-c">dispatch_async(dispatch_get_global_queue(0, 0), ^{
        
        self.testScrollView = [[UIScrollView alloc] initWithFrame:self.view.bounds];
        [self.view addSubview:self.testScrollView];
        NSLog(@"self.testScrollView.adjustedContentInset = %@", NSStringFromUIEdgeInsets(self.testScrollView.adjustedContentInset));
        
    });
</code></pre>

<p>Logä¸­ä¼šå‡ºç°ä¸‹é¢æç¤ºï¼š</p>

<pre><code class="language-objective-c">=================================================================
Main Thread Checker: UI API called on a background thread: -[UIView bounds]
PID: 8673, TID: 692873, Thread name: (none), Queue name: com.apple.root.default-qos, QoS: 21
Backtrace:
4   test                                0x00000001036e42a6 __29-[ViewController viewDidLoad]_block_invoke + 150
5   libdispatch.dylib                   0x00000001084903f7 _dispatch_call_block_and_release + 12
6   libdispatch.dylib                   0x000000010849143c _dispatch_client_callout + 8
7   libdispatch.dylib                   0x0000000108496352 _dispatch_queue_override_invoke + 1458
8   libdispatch.dylib                   0x000000010849d1f9 _dispatch_root_queue_drain + 772
9   libdispatch.dylib                   0x000000010849ce97 _dispatch_worker_thread3 + 132
10  libsystem_pthread.dylib             0x00000001089511ca _pthread_wqthread + 1387
11  libsystem_pthread.dylib             0x0000000108950c4d start_wqthread + 13
2017-10-31 15:16:36.339784+0800 test[8673:692873] [reports] Main Thread Checker: UI API called on a background thread: -[UIView bounds]
PID: 8673, TID: 692873, Thread name: (none), Queue name: com.apple.root.default-qos, QoS: 21
Backtrace:
4   test                                0x00000001036e42a6 __29-[ViewController viewDidLoad]_block_invoke + 150
5   libdispatch.dylib                   0x00000001084903f7 _dispatch_call_block_and_release + 12
6   libdispatch.dylib                   0x000000010849143c _dispatch_client_callout + 8
7   libdispatch.dylib                   0x0000000108496352 _dispatch_queue_override_invoke + 1458
8   libdispatch.dylib                   0x000000010849d1f9 _dispatch_root_queue_drain + 772
9   libdispatch.dylib                   0x000000010849ce97 _dispatch_worker_thread3 + 132
10  libsystem_pthread.dylib             0x00000001089511ca _pthread_wqthread + 1387
11  libsystem_pthread.dylib             0x0000000108950c4d start_wqthread + 13
=================================================================
Main Thread Checker: UI API called on a background thread: -[UIScrollView initWithFrame:]
PID: 8673, TID: 692873, Thread name: (none), Queue name: com.apple.root.default-qos, QoS: 21
Backtrace:
4   test                                0x00000001036e42f9 __29-[ViewController viewDidLoad]_block_invoke + 233
5   libdispatch.dylib                   0x00000001084903f7 _dispatch_call_block_and_release + 12
6   libdispatch.dylib                   0x000000010849143c _dispatch_client_callout + 8
7   libdispatch.dylib                   0x0000000108496352 _dispatch_queue_override_invoke + 1458
8   libdispatch.dylib                   0x000000010849d1f9 _dispatch_root_queue_drain + 772
9   libdispatch.dylib                   0x000000010849ce97 _dispatch_worker_thread3 + 132
10  libsystem_pthread.dylib             0x00000001089511ca _pthread_wqthread + 1387
11  libsystem_pthread.dylib             0x0000000108950c4d start_wqthread + 13
2017-10-31 15:16:36.524768+0800 test[8673:692873] [reports] Main Thread Checker: UI API called on a background thread: -[UIScrollView initWithFrame:]
PID: 8673, TID: 692873, Thread name: (none), Queue name: com.apple.root.default-qos, QoS: 21
Backtrace:
4   test                                0x00000001036e42f9 __29-[ViewController viewDidLoad]_block_invoke + 233
5   libdispatch.dylib                   0x00000001084903f7 _dispatch_call_block_and_release + 12
6   libdispatch.dylib                   0x000000010849143c _dispatch_client_callout + 8
7   libdispatch.dylib                   0x0000000108496352 _dispatch_queue_override_invoke + 1458
8   libdispatch.dylib                   0x000000010849d1f9 _dispatch_root_queue_drain + 772
9   libdispatch.dylib                   0x000000010849ce97 _dispatch_worker_thread3 + 132
10  libsystem_pthread.dylib             0x00000001089511ca _pthread_wqthread + 1387
11  libsystem_pthread.dylib             0x0000000108950c4d start_wqthread + 13
2017-10-31 15:16:36.620180+0800 test[8673:692873] [Assert] Cannot be called with asCopy = NO on non-main thread.
2017-10-31 15:16:36.655489+0800 test[8673:692873] [Assert] Cannot be called with asCopy = NO on non-main thread.
2017-10-31 15:16:36.657453+0800 test[8673:692873] [Assert] Cannot be called with asCopy = NO on non-main thread.
2017-10-31 15:16:36.660441+0800 test[8673:692873] self.testScrollView.adjustedContentInset = {0, 0, 0, 0}
</code></pre>

<p>ä»æ—¥å¿—ä¸­äº†è§£åˆ°ä¸€ä¸ª<a href="https://developer.apple.com/documentation/code_diagnostics/main_thread_checker%5C%22+target=%5C%22_blank">Main Thread Checker</a>çš„ä¸œè¥¿ï¼Œæ ¹æ®è‹¹æœå®˜æ–¹æ–‡æ¡£æ¥çœ‹ä»–æ˜¯ä½œç”¨åœ¨AppKitï¼ˆOSXä¸­ï¼‰ã€UIKitè¿˜æœ‰ä¸€äº›ç›¸å…³APIä¸Šçš„åå°çº¿ç¨‹ï¼Œä¸»è¦æ˜¯ç”¨æ¥ç›‘æ§è¿™äº›æ¡†æ¶ä¸­çš„æ¥å£æ˜¯å¦åœ¨ä¸»çº¿ç¨‹ä¸­è¿›è¡Œè°ƒç”¨ï¼Œå¦‚æœæ²¡æœ‰åˆ™å‘å‡ºè­¦å‘Šæ—¥å¿—ã€‚å› æ­¤ï¼Œåˆ©ç”¨è¿™ä¸ªåŠŸèƒ½å¯ä»¥è®©æˆ‘ä»¬å¿«é€Ÿåœ°å®šä½é‚£äº›åœ°æ–¹å­˜åœ¨é—®é¢˜ã€‚</p>
:ET