I"ï=<ul id="markdown-toc">
  <li><a href="#æ•´ä½“æè¿°" id="markdown-toc-æ•´ä½“æè¿°">æ•´ä½“æè¿°</a></li>
  <li><a href="#æºç " id="markdown-toc-æºç ">æºç </a></li>
</ul>
<hr />

<h1 id="æ•´ä½“æè¿°">æ•´ä½“æè¿°</h1>

<p><code class="language-plaintext highlighter-rouge">CAAnimation.h</code>ä¸»è¦æ˜¯å„ç±»åŠ¨ç”»çš„åŸºç±»ï¼Œæˆ‘ä»¬ä¸€èˆ¬ä¸ä¼šä½¿ç”¨å®ƒæ¥åšåŠ¨ç”»ã€‚</p>

<p>é™¤äº†<code class="language-plaintext highlighter-rouge">CAMediaTiming</code>åè®®ä¸­çš„æ–¹æ³•ï¼Œå¢åŠ äº†<code class="language-plaintext highlighter-rouge">CAAnimationDelegate</code>çš„ä»£ç†å±æ€§ç­‰ã€‚</p>

<h1 id="æºç ">æºç </h1>

<pre><code class="language-objective-c">/* CoreAnimation - CAAnimation.h

   Copyright (c) 2006-2016, Apple Inc.
   All rights reserved. */

#import &lt;QuartzCore/CALayer.h&gt;
#import &lt;Foundation/NSObject.h&gt;

@class NSArray, NSString, CAMediaTimingFunction, CAValueFunction;
@protocol CAAnimationDelegate;

NS_ASSUME_NONNULL_BEGIN

/** The base animation class. **/

CA_CLASS_AVAILABLE (10.5, 2.0, 9.0, 2.0)
@interface CAAnimation : NSObject
    &lt;NSCoding, NSCopying, CAMediaTiming, CAAction&gt;
{
@private
  void *_attr;
  uint32_t _flags;
}

/* Creates a new animation object. */
// å¿«é€Ÿå®ä¾‹åŒ–
+ (instancetype)animation;

/* Animations implement the same property model as defined by CALayer.
 * See CALayer.h for more details. */

+ (nullable id)defaultValueForKey:(NSString *)key;
- (BOOL)shouldArchiveValueForKey:(NSString *)key;

/* A timing function defining the pacing of the animation. Defaults to
 * nil indicating linear pacing. */
// æ§åˆ¶åŠ¨ç”»çš„èŠ‚å¥ã€‚ç³»ç»Ÿæä¾›çš„åŒ…æ‹¬ï¼škCAMediaTimingFunctionLinear ï¼ˆåŒ€é€Ÿï¼‰ï¼ŒkCAMediaTimingFunctionEaseIn ï¼ˆæ…¢è¿›å¿«å‡ºï¼‰ï¼ŒkCAMediaTimingFunctionEaseOut ï¼ˆå¿«è¿›æ…¢å‡ºï¼‰ï¼ŒkCAMediaTimingFunctionEaseInEaseOut ï¼ˆæ…¢è¿›æ…¢å‡ºï¼Œä¸­é—´åŠ é€Ÿï¼‰ï¼ŒkCAMediaTimingFunctionDefault ï¼ˆé»˜è®¤ï¼‰ï¼Œå½“ç„¶ä¹Ÿå¯é€šè¿‡è‡ªå®šä¹‰åˆ›å»ºCAMediaTimingFunctionã€‚
@property(nullable, strong) CAMediaTimingFunction *timingFunction;

/* The delegate of the animation. This object is retained for the
 * lifetime of the animation object. Defaults to nil. See below for the
 * supported delegate methods. */
// ä»£ç†
@property(nullable, strong) id &lt;CAAnimationDelegate&gt; delegate;

/* When true, the animation is removed from the render tree once its
 * active duration has passed. Defaults to YES. */
// æ˜¯å¦è®©å›¾å±‚ä¿æŒæ˜¾ç¤ºåŠ¨ç”»æ‰§è¡Œåçš„çŠ¶æ€ï¼Œé»˜è®¤ä¸ºYESï¼Œä¹Ÿå°±æ˜¯åŠ¨ç”»æ‰§è¡Œå®Œæ¯•åä»æ¶‚å±‚ä¸Šç§»é™¤ï¼Œæ¢å¤åˆ°æ‰§è¡Œå‰çš„çŠ¶æ€ï¼Œå¦‚æœè®¾ç½®ä¸ºNOï¼Œå¹¶ä¸”è®¾ç½®fillModeä¸ºkCAFillModeForwardsï¼Œåˆ™ä¿æŒåŠ¨ç”»æ‰§è¡Œåçš„çŠ¶æ€ã€‚
@property(getter=isRemovedOnCompletion) BOOL removedOnCompletion;

@end

/* Delegate methods for CAAnimation. */

@protocol CAAnimationDelegate &lt;NSObject&gt;
@optional

/* Called when the animation begins its active duration. */

- (void)animationDidStart:(CAAnimation *)anim;

/* Called when the animation either completes its active duration or
 * is removed from the object it is attached to (i.e. the layer). 'flag'
 * is true if the animation reached the end of its active duration
 * without being removed. */

- (void)animationDidStop:(CAAnimation *)anim finished:(BOOL)flag;

@end


/** Subclass for property-based animations. **/

CA_CLASS_AVAILABLE (10.5, 2.0, 9.0, 2.0)
@interface CAPropertyAnimation : CAAnimation
// å±æ€§åŠ¨ç”»ï¼Œé’ˆå¯¹å¯¹è±¡çš„å¯åŠ¨ç”»å±æ€§è¿›è¡Œæ•ˆæœçš„è®¾ç½®ï¼Œä¸€èˆ¬ä¸ç›´æ¥ä½¿ç”¨ã€‚
    
/* Creates a new animation object with its `keyPath' property set to
 * 'path'. */

+ (instancetype)animationWithKeyPath:(nullable NSString *)path;

/* The key-path describing the property to be animated. */
// CALayerçš„æŸä¸ªå±æ€§åï¼Œå¹¶é€šè¿‡è¿™ä¸ªå±æ€§çš„å€¼è¿›è¡Œä¿®æ”¹ï¼Œè¾¾åˆ°ç›¸åº”çš„åŠ¨ç”»æ•ˆæœã€‚
@property(nullable, copy) NSString *keyPath;

/* When true the value specified by the animation will be "added" to
 * the current presentation value of the property to produce the new
 * presentation value. The addition function is type-dependent, e.g.
 * for affine transforms the two matrices are concatenated. Defaults to
 * NO. */
// å±æ€§åŠ¨ç”»æ˜¯å¦ä»¥å½“å‰åŠ¨ç”»æ•ˆæœä¸ºåŸºç¡€ï¼Œé»˜è®¤ä¸ºNOã€‚
@property(getter=isAdditive) BOOL additive;

/* The `cumulative' property affects how repeating animations produce
 * their result. If true then the current value of the animation is the
 * value at the end of the previous repeat cycle, plus the value of the
 * current repeat cycle. If false, the value is simply the value
 * calculated for the current repeat cycle. Defaults to NO. */
// æŒ‡å®šåŠ¨ç”»æ˜¯å¦ä¸ºç´¯åŠ æ•ˆæœï¼Œé»˜è®¤ä¸ºNOã€‚
@property(getter=isCumulative) BOOL cumulative;

/* If non-nil a function that is applied to interpolated values
 * before they are set as the new presentation value of the animation's
 * target property. Defaults to nil. */
// æ­¤å±æ€§é…åˆCALayerçš„transformå±æ€§ä½¿ç”¨ã€‚
@property(nullable, strong) CAValueFunction *valueFunction;

@end


/** Subclass for basic (single-keyframe) animations. **/

CA_CLASS_AVAILABLE (10.5, 2.0, 9.0, 2.0)
@interface CABasicAnimation : CAPropertyAnimation
/* è¯¥ç±»æä¾›äº†åŸºæœ¬çš„ã€å•å…³é”®å¸§çš„Layerå±æ€§åŠ¨ç”» */
// é€šè¿‡keyPathå¯¹åº”å±æ€§è¿›è¡Œæ§åˆ¶ï¼Œéœ€è¦è®¾ç½®fromValueä»¥åŠtoValue

/* The objects defining the property values being interpolated between.
 * All are optional, and no more than two should be non-nil. The object
 * type should match the type of the property being animated (using the
 * standard rules described in CALayer.h). The supported modes of
 * animation are:
 *
 * - both `fromValue' and `toValue' non-nil. Interpolates between
 * `fromValue' and `toValue'.
 *
 * - `fromValue' and `byValue' non-nil. Interpolates between
 * `fromValue' and `fromValue' plus `byValue'.
 *
 * - `byValue' and `toValue' non-nil. Interpolates between `toValue'
 * minus `byValue' and `toValue'.
 *
 * - `fromValue' non-nil. Interpolates between `fromValue' and the
 * current presentation value of the property.
 *
 * - `toValue' non-nil. Interpolates between the layer's current value
 * of the property in the render tree and `toValue'.
 *
 * - `byValue' non-nil. Interpolates between the layer's current value
 * of the property in the render tree and that plus `byValue'. */

@property(nullable, strong) id fromValue; // æ‰€æ”¹å˜å±æ€§çš„èµ·å§‹å€¼
@property(nullable, strong) id toValue;   // æ‰€æ”¹å˜å±æ€§çš„ç»“æŸå€¼
@property(nullable, strong) id byValue;   // æ‰€æ”¹å˜å±æ€§ç›¸åŒèµ·å§‹å€¼çš„æ”¹å˜é‡ã€‚åœ¨ä¸è®¾ç½®toValueæ—¶ï¼ŒtoValue = fromValue + byValueï¼Œä¹Ÿå°±æ˜¯åœ¨å½“å‰çš„ä½ç½®ä¸Šå¢åŠ å¤šå°‘ã€‚

@end


/** General keyframe animation class. **/

CA_CLASS_AVAILABLE (10.5, 2.0, 9.0, 2.0)
@interface CAKeyframeAnimation : CAPropertyAnimation
// å…³é”®å¸§åŠ¨ç”»ï¼ŒåŒæ ·é€šè¿‡keyPathå¯¹åº”å±æ€§è¿›è¡Œæ§åˆ¶ï¼Œä½†å®ƒå¯ä»¥é€šè¿‡valuesæˆ–è€…pathè¿›è¡Œå¤šä¸ªé˜¶æ®µçš„æ§åˆ¶

/* An array of objects providing the value of the animation function for
 * each keyframe. */
// å…³é”®å¸§ç»„æˆçš„æ•°ç»„ï¼ŒåŠ¨ç”»ä¼šä¾æ¬¡æ˜¾ç¤ºå…¶ä¸­çš„æ¯ä¸€å¸§ã€‚
@property(nullable, copy) NSArray *values;

/* An optional path object defining the behavior of the animation
 * function. When non-nil overrides the `values' property. Each point
 * in the path except for `moveto' points defines a single keyframe for
 * the purpose of timing and interpolation. Defaults to nil. For
 * constant velocity animation along the path, `calculationMode' should
 * be set to `paced'. Upon assignment the path is copied. */
// å…³é”®å¸§è·¯å¾„ï¼ŒåŠ¨ç”»è¿›è¡Œçš„è¦ç´ ï¼Œä¼˜å…ˆçº§æ¯”valuesé«˜ï¼Œä½†æ˜¯åªå¯¹CALayerçš„anchorPointå’Œpositionèµ·ä½œç”¨ã€‚
@property(nullable) CGPathRef path;

/* An optional array of `NSNumber' objects defining the pacing of the
 * animation. Each time corresponds to one value in the `values' array,
 * and defines when the value should be used in the animation function.
 * Each value in the array is a floating point number in the range
 * [0,1]. */
// æ¯ä¸€å¸§å¯¹åº”çš„æ—¶é—´ï¼Œå¦‚æœä¸è®¾ç½®ï¼Œåˆ™å„å…³é”®å¸§å¹³åˆ†è®¾å®šæ—¶é—´ã€‚
@property(nullable, copy) NSArray&lt;NSNumber *&gt; *keyTimes;

/* An optional array of CAMediaTimingFunction objects. If the `values' array
 * defines n keyframes, there should be n-1 objects in the
 * `timingFunctions' array. Each function describes the pacing of one
 * keyframe to keyframe segment. */
// æ¯ä¸€å¸§å¯¹åº”çš„åŠ¨ç”»èŠ‚å¥ã€‚åŠ¨ç”»èŠ‚å¥çš„ä¸€ä¸ªé›†åˆ
@property(nullable, copy) NSArray&lt;CAMediaTimingFunction *&gt; *timingFunctions;

/* The "calculation mode". Possible values are `discrete', `linear',
 * `paced', `cubic' and `cubicPaced'. Defaults to `linear'. When set to
 * `paced' or `cubicPaced' the `keyTimes' and `timingFunctions'
 * properties of the animation are ignored and calculated implicitly. */
// åŠ¨ç”»çš„è®¡ç®—æ¨¡å¼ï¼Œç³»ç»Ÿæä¾›äº†å¯¹åº”çš„å‡ ç§æ¨¡å¼ã€‚
@property(copy) NSString *calculationMode;

/* For animations with the cubic calculation modes, these properties
 * provide control over the interpolation scheme. Each keyframe may
 * have a tension, continuity and bias value associated with it, each
 * in the range [-1, 1] (this defines a Kochanek-Bartels spline, see
 * http://en.wikipedia.org/wiki/Kochanek-Bartels_spline).
 *
 * The tension value controls the "tightness" of the curve (positive
 * values are tighter, negative values are rounder). The continuity
 * value controls how segments are joined (positive values give sharp
 * corners, negative values give inverted corners). The bias value
 * defines where the curve occurs (positive values move the curve before
 * the control point, negative values move it after the control point).
 *
 * The first value in each array defines the behavior of the tangent to
 * the first control point, the second value controls the second
 * point's tangents, and so on. Any unspecified values default to zero
 * (giving a Catmull-Rom spline if all are unspecified). */
// åŠ¨ç”»å¼ åŠ›æ§åˆ¶ã€‚
@property(nullable, copy) NSArray&lt;NSNumber *&gt; *tensionValues;
// åŠ¨ç”»è¿ç»­æ€§æ§åˆ¶ã€‚
@property(nullable, copy) NSArray&lt;NSNumber *&gt; *continuityValues;
// åŠ¨ç”»åå·®ç‡æ§åˆ¶ã€‚
@property(nullable, copy) NSArray&lt;NSNumber *&gt; *biasValues;

/* Defines whether or objects animating along paths rotate to match the
 * path tangent. Possible values are `auto' and `autoReverse'. Defaults
 * to nil. The effect of setting this property to a non-nil value when
 * no path object is supplied is undefined. `autoReverse' rotates to
 * match the tangent plus 180 degrees. */
//  åŠ¨ç”»æ²¿è·¯å¾„æ—‹è½¬æ–¹å¼ï¼Œç³»ç»Ÿæä¾›äº†ä¸¤ç§æ¨¡å¼ã€‚`auto' and `autoReverse'ã€‚é»˜è®¤æ˜¯nilã€‚
@property(nullable, copy) NSString *rotationMode;

@end

/* `calculationMode' strings. */

CA_EXTERN NSString * const kCAAnimationLinear
    CA_AVAILABLE_STARTING (10.5, 2.0, 9.0, 2.0);
CA_EXTERN NSString * const kCAAnimationDiscrete
    CA_AVAILABLE_STARTING (10.5, 2.0, 9.0, 2.0);
CA_EXTERN NSString * const kCAAnimationPaced
    CA_AVAILABLE_STARTING (10.5, 2.0, 9.0, 2.0);
CA_EXTERN NSString * const kCAAnimationCubic
    CA_AVAILABLE_STARTING (10.7, 4.0, 9.0, 2.0);
CA_EXTERN NSString * const kCAAnimationCubicPaced
    CA_AVAILABLE_STARTING (10.7, 4.0, 9.0, 2.0);

/* `rotationMode' strings. */

CA_EXTERN NSString * const kCAAnimationRotateAuto
    CA_AVAILABLE_STARTING (10.5, 2.0, 9.0, 2.0);
CA_EXTERN NSString * const kCAAnimationRotateAutoReverse
    CA_AVAILABLE_STARTING (10.5, 2.0, 9.0, 2.0);

/** Subclass for mass-spring animations. */

CA_CLASS_AVAILABLE (10.11, 9.0, 9.0, 2.0)
@interface CASpringAnimation : CABasicAnimation
// å¸¦æœ‰åˆå§‹é€Ÿåº¦ä»¥åŠé˜»å°¼æŒ‡æ•°ç­‰ç‰©ç†å‚æ•°çš„å±æ€§åŠ¨ç”»ã€‚

/* The mass of the object attached to the end of the spring. Must be greater
   than 0. Defaults to one. */
// è´¨é‡
@property CGFloat mass;

/* The spring stiffness coefficient. Must be greater than 0.
 * Defaults to 100. */
// å¼¹ç°§çš„åŠ²åº¦ç³»æ•°
@property CGFloat stiffness;

/* The damping coefficient. Must be greater than or equal to 0.
 * Defaults to 10. */
// é˜»å°¼ç³»æ•°
@property CGFloat damping;

/* The initial velocity of the object attached to the spring. Defaults
 * to zero, which represents an unmoving object. Negative values
 * represent the object moving away from the spring attachment point,
 * positive values represent the object moving towards the spring
 * attachment point. */
// åˆå§‹é€Ÿåº¦
@property CGFloat initialVelocity;

/* Returns the estimated duration required for the spring system to be
 * considered at rest. The duration is evaluated for the current animation
 * parameters. */
// ç»“ç®—æ—¶é—´ï¼Œæ ¹æ®ä¸Šè¿°å‚æ•°è®¡ç®—å‡ºçš„é¢„è®¡æ—¶é—´ï¼Œç›¸å¯¹äºä½ è®¾ç½®çš„æ—¶é—´ï¼Œè¿™ä¸ªæ—¶é—´æ¯”è¾ƒå‡†ç¡®ã€‚
@property(readonly) CFTimeInterval settlingDuration;

@end

/** Transition animation subclass. **/

CA_CLASS_AVAILABLE (10.5, 2.0, 9.0, 2.0)
@interface CATransition : CAAnimation
// è½¬åœºåŠ¨ç”»ï¼Œç³»ç»Ÿæä¾›äº†å¾ˆå¤šé…·ç‚«æ•ˆæœ

/* The name of the transition. Current legal transition types include
 * `fade', `moveIn', `push' and `reveal'. Defaults to `fade'. */
// è½¬åœºåŠ¨ç”»ç±»å‹ã€‚
@property(copy) NSString *type;

/* An optional subtype for the transition. E.g. used to specify the
 * transition direction for motion-based transitions, in which case
 * the legal values are `fromLeft', `fromRight', `fromTop' and
 * `fromBottom'. */
//  è½¬åœºåŠ¨ç”»æ–¹å‘ã€‚
@property(nullable, copy) NSString *subtype;

/* The amount of progress through to the transition at which to begin
 * and end execution. Legal values are numbers in the range [0,1].
 * `endProgress' must be greater than or equal to `startProgress'.
 * Default values are 0 and 1 respectively. */
// åŠ¨ç”»èµ·ç‚¹è¿›åº¦ï¼ˆæ•´ä½“çš„ç™¾åˆ†æ¯”ï¼‰ã€‚
@property float startProgress;
// åŠ¨ç”»ç»ˆç‚¹è¿›åº¦ï¼ˆæ•´ä½“çš„ç™¾åˆ†æ¯”ï¼‰ã€‚
@property float endProgress;

/* An optional filter object implementing the transition. When set the
 * `type' and `subtype' properties are ignored. The filter must
 * implement `inputImage', `inputTargetImage' and `inputTime' input
 * keys, and the `outputImage' output key. Optionally it may support
 * the `inputExtent' key, which will be set to a rectangle describing
 * the region in which the transition should run. Defaults to nil. */
// è‡ªå®šä¹‰è½¬åœºã€‚
@property(nullable, strong) id filter;

@end

/* Common transition types. */
// æ·¡å‡ºæ•ˆæœ
CA_EXTERN NSString * const kCATransitionFade
    CA_AVAILABLE_STARTING (10.5, 2.0, 9.0, 2.0);
// æ–°è§†å›¾ç§»åŠ¨åˆ°æ—§è§†å›¾ä¸Š
CA_EXTERN NSString * const kCATransitionMoveIn
    CA_AVAILABLE_STARTING (10.5, 2.0, 9.0, 2.0);
// æ–°è§†å›¾å°†æ—§è§†å›¾æ¨å‡ºå»
CA_EXTERN NSString * const kCATransitionPush
    CA_AVAILABLE_STARTING (10.5, 2.0, 9.0, 2.0);
// ç§»å¼€æ—§è§†å›¾æ˜¾ç¤ºæ–°è§†å›¾
CA_EXTERN NSString * const kCATransitionReveal
    CA_AVAILABLE_STARTING (10.5, 2.0, 9.0, 2.0);

/* Common transition subtypes. */
// ä»å³ä¾§è½¬åœº
CA_EXTERN NSString * const kCATransitionFromRight
    CA_AVAILABLE_STARTING (10.5, 2.0, 9.0, 2.0);
// ä»å·¦ä¾§è½¬åœº
CA_EXTERN NSString * const kCATransitionFromLeft
    CA_AVAILABLE_STARTING (10.5, 2.0, 9.0, 2.0);
// ä»é¡¶éƒ¨è½¬åœº
CA_EXTERN NSString * const kCATransitionFromTop
    CA_AVAILABLE_STARTING (10.5, 2.0, 9.0, 2.0);
// ä»åº•éƒ¨è½¬åœº
CA_EXTERN NSString * const kCATransitionFromBottom
    CA_AVAILABLE_STARTING (10.5, 2.0, 9.0, 2.0);


/** Animation subclass for grouped animations. **/

CA_CLASS_AVAILABLE (10.5, 2.0, 9.0, 2.0)
@interface CAAnimationGroup : CAAnimation
// åŠ¨ç”»ç»„ï¼Œæ–¹ä¾¿å¯¹äºå¤šåŠ¨ç”»çš„ç»Ÿä¸€æ§åˆ¶ç®¡ç†ã€‚
    
/* An array of CAAnimation objects. Each member of the array will run
 * concurrently in the time space of the parent animation using the
 * normal rules. */
// æ‰€æœ‰åŠ¨ç”»æ•ˆæœå…ƒç´ çš„é›†åˆã€‚
@property(nullable, copy) NSArray&lt;CAAnimation *&gt; *animations;

@end

NS_ASSUME_NONNULL_END
</code></pre>

:ET